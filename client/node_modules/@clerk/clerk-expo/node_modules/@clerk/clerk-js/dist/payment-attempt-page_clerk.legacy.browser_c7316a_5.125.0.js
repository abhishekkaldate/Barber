"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8711"],{8317:function(t,e,r){r.r(e),r.d(e,{OrganizationPaymentAttemptPage:()=>i});var a=r(73312),o=r(11576),n=r(12264);let i=()=>(0,a.tZ)(o.SubscriberTypeContext.Provider,{value:"organization",children:(0,a.tZ)(n.PaymentAttemptPage,{})})},12264:function(t,e,r){r.r(e),r.d(e,{PaymentAttemptPage:()=>B,PaymentAttemptsList:()=>d});var a=r(73312),o=r(16600),n=r(39082),i=r(55913),l=r(11576),c=r(64204),s=r(24676);let d=()=>{let{data:t,isLoading:e,count:r}=(0,l.usePaymentAttempts)(),n=(0,l.useSubscriberTypeLocalizationRoot)();return(0,a.tZ)(o.wQ,{page:1,onPageChange:t=>{},itemCount:r,pageCount:1,itemsPerPage:10,isLoading:e,emptyStateLocalizationKey:(0,c.localizationKeys)("".concat(n,".billingPage.paymentHistorySection.empty")),headers:[(0,c.localizationKeys)("".concat(n,".billingPage.paymentHistorySection.tableHeader__date")),(0,c.localizationKeys)("".concat(n,".billingPage.paymentHistorySection.tableHeader__amount")),(0,c.localizationKeys)("".concat(n,".billingPage.paymentHistorySection.tableHeader__status"))],rows:t.map(t=>(0,a.tZ)(p,{paymentAttempt:t},t.id))})},p=t=>{let{paymentAttempt:e}=t,{id:r,amount:l,failedAt:d,paidAt:p,updatedAt:m,status:u}=e,{navigate:y}=(0,s.useRouter)();return(0,a.BX)(o.Uk,{onClick:()=>{y("payment-attempt/".concat(r))},children:[(0,a.BX)(c.Td,{sx:{cursor:"pointer"},children:[(0,a.tZ)(c.Text,{variant:"subtitle",children:(0,n.p)(p||d||m,"long")}),(0,a.tZ)(c.Text,{colorScheme:"secondary",variant:"caption",truncate:!0,sx:t=>({marginTop:t.space.$0x5}),children:(0,i.L)(r)})]}),(0,a.tZ)(c.Td,{sx:{cursor:"pointer"},children:(0,a.BX)(c.Text,{children:[l.currencySymbol,l.amountFormatted]})}),(0,a.tZ)(c.Td,{children:(0,a.tZ)(c.Badge,{colorScheme:"paid"===u?"success":"failed"===u?"danger":"primary",sx:{textTransform:"capitalize"},children:u})})]})};r(45261),r(70957),r(24551),r(22349),r(65223);var m=r(61869),u=r(9117),y=r(92654),h=r(28e3),b=r(7439),g=r(65695),x=r(96519);let B=()=>{let{params:t,navigate:e}=(0,s.useRouter)(),r=(0,b.sC)(),o=(0,b.xr)(),{t:l,translateError:d}=(0,c.useLocalizations)(),{data:p,isLoading:h,error:g}=(0,m.bj)({paymentAttemptId:t.paymentAttemptId,for:"organization"===r?"organization":"user",enabled:!!t.paymentAttemptId}),x=null==p?void 0:p.subscriptionItem;return h?(0,a.tZ)(c.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,a.tZ)(c.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"},elementDescriptor:c.descriptors.spinner})}):(0,a.BX)(a.HY,{children:[(0,a.tZ)(y.h.Root,{sx:t=>({borderBlockEndWidth:t.borderWidths.$normal,borderBlockEndStyle:t.borderStyles.$solid,borderBlockEndColor:t.colors.$borderAlpha100,marginBlockEnd:t.space.$4,paddingBlockEnd:t.space.$4}),children:(0,a.tZ)(y.h.BackLink,{onClick:()=>void e("../../",{searchParams:new URLSearchParams("tab=payments")}),children:(0,a.tZ)(y.h.Title,{localizationKey:(0,c.localizationKeys)("".concat(o,".billingPage.start.headerTitle__payments")),textVariant:"h2"})})}),p?(0,a.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptRoot,as:"article",sx:t=>({borderWidth:t.borderWidths.$normal,borderStyle:t.borderStyles.$solid,borderColor:t.colors.$borderAlpha100,borderRadius:t.radii.$lg,overflow:"clip"}),children:[(0,a.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptHeader,as:"header",sx:t=>({padding:t.space.$4,background:t.colors.$neutralAlpha25,display:"flex",justifyContent:"space-between",alignItems:"flex-start"}),children:[(0,a.BX)(c.Span,{elementDescriptor:c.descriptors.paymentAttemptHeaderTitleContainer,children:[(0,a.tZ)(c.Heading,{elementDescriptor:c.descriptors.paymentAttemptHeaderTitle,textVariant:"h2",localizationKey:(0,n.p)(p.paidAt||p.failedAt||p.updatedAt,"long")}),(0,a.BX)(c.Span,{sx:t=>({display:"flex",alignItems:"center",gap:t.space.$0x25,color:t.colors.$colorMutedForeground}),children:[(0,a.tZ)(Z,{copyLabel:"Copy payment attempt ID",text:p.id}),(0,a.tZ)(c.Text,{colorScheme:"secondary",variant:"subtitle",children:(0,i.L)(p.id)})]})]}),(0,a.tZ)(c.Badge,{elementDescriptor:c.descriptors.paymentAttemptHeaderBadge,colorScheme:"paid"===p.status?"success":"failed"===p.status?"danger":"primary",sx:{textTransform:"capitalize"},children:p.status})]}),(0,a.tZ)(S,{subscriptionItem:x}),(0,a.BX)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptFooter,as:"footer",sx:t=>({paddingInline:t.space.$4,paddingBlock:t.space.$3,background:t.colors.$neutralAlpha25,borderBlockStartWidth:t.borderWidths.$normal,borderBlockStartStyle:t.borderStyles.$solid,borderBlockStartColor:t.colors.$borderAlpha100,display:"flex",justifyContent:"space-between"}),children:[(0,a.tZ)(c.Text,{variant:"h3",localizationKey:(0,c.localizationKeys)("billing.totalDue"),elementDescriptor:c.descriptors.paymentAttemptFooterLabel}),(0,a.BX)(c.Span,{elementDescriptor:c.descriptors.paymentAttemptFooterValueContainer,sx:t=>({display:"flex",alignItems:"center",gap:t.space.$2x5}),children:[(0,a.tZ)(c.Text,{variant:"caption",colorScheme:"secondary",elementDescriptor:c.descriptors.paymentAttemptFooterCurrency,sx:{textTransform:"uppercase"},children:p.amount.currency}),(0,a.BX)(c.Text,{variant:"h3",elementDescriptor:c.descriptors.paymentAttemptFooterValue,children:[p.amount.currencySymbol,p.amount.amountFormatted]})]})]})]}):(0,a.tZ)(c.Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:(0,a.tZ)(u.b,{variant:"danger",colorScheme:"danger",children:g?d(g.errors[0]):l((0,c.localizationKeys)("".concat(o,".billingPage.paymentHistorySection.notFound")))})})]})};function S(t){var e,r;let{subscriptionItem:o}=t;if(!o)return null;let n="month"===o.planPeriod?o.plan.fee:o.plan.annualMonthlyFee;return(0,a.tZ)(c.Box,{elementDescriptor:c.descriptors.paymentAttemptBody,sx:t=>({padding:t.space.$4}),children:(0,a.BX)(h.a.Root,{children:[(0,a.BX)(h.a.Group,{children:[(0,a.tZ)(h.a.Title,{title:o.plan.name}),(0,a.tZ)(h.a.Description,{prefix:"annual"===o.planPeriod?"x12":void 0,text:"".concat(n.currencySymbol).concat(n.amountFormatted)})]}),(0,a.BX)(h.a.Group,{borderTop:!0,variant:"tertiary",children:[(0,a.tZ)(h.a.Title,{title:(0,c.localizationKeys)("billing.subtotal")}),(0,a.tZ)(h.a.Description,{text:"".concat(null==(e=o.amount)?void 0:e.currencySymbol).concat(null==(r=o.amount)?void 0:r.amountFormatted)})]}),o.credits&&o.credits.proration&&o.credits.proration.amount.amount>0&&(0,a.BX)(h.a.Group,{variant:"tertiary",children:[(0,a.tZ)(h.a.Title,{title:(0,c.localizationKeys)("billing.prorationCredit")}),(0,a.tZ)(h.a.Description,{text:"- ".concat(o.credits.proration.amount.currencySymbol).concat(o.credits.proration.amount.amountFormatted)})]}),o.credits&&o.credits.payer&&o.credits.payer.appliedAmount.amount>0&&(0,a.BX)(h.a.Group,{variant:"tertiary",children:[(0,a.tZ)(h.a.Title,{title:(0,c.localizationKeys)("billing.accountCredit")}),(0,a.tZ)(h.a.Description,{text:"- ".concat(o.credits.payer.appliedAmount.currencySymbol).concat(o.credits.payer.appliedAmount.amountFormatted)})]})]})})}function Z(t){let{text:e,copyLabel:r="Copy"}=t,{onCopy:o,hasCopied:n}=(0,g.VP)(e);return(0,a.tZ)(c.Button,{elementDescriptor:c.descriptors.paymentAttemptCopyButton,variant:"unstyled",onClick:o,sx:t=>({color:"inherit",width:t.sizes.$4,height:t.sizes.$4,padding:0,borderRadius:t.radii.$sm,"&:focus-visible":{outline:"2px solid",outlineColor:t.colors.$colorRing}}),focusRing:!1,"aria-label":n?"Copied":r,children:(0,a.tZ)(c.Icon,{size:"sm",icon:n?x.Jr:x.CK,"aria-hidden":!0})})}}}]);