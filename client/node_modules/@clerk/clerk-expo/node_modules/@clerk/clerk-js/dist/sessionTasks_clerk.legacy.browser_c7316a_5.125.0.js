"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8877"],{51618:function(e,t,r){r.r(t),r.d(t,{SessionTasks:()=>f});var s=r(73312),i=r(61869),o=r(67964),l=r(69144),n=r(64204),a=r(92418),d=r(2672),c=r(21455),u=r(76663),h=r(86988),p=r(24676),Z=r(7008),w=r(13678),m=r(95710);let v=()=>{let e=(0,i.cL)(),{navigate:t}=(0,p.useRouter)(),{redirectUrlComplete:r}=(0,h.G)();return(0,l.useEffect)(()=>{let r=setTimeout(()=>{var r,s;let i=null==(s=e.session)||null==(r=s.currentTask)?void 0:r.key;i&&t("./".concat(u.fr[i]))},500);return()=>clearTimeout(r)},[t,e,r]),(0,s.tZ)(n.Flow.Part,{part:"start",children:(0,s.BX)(a.Z.Root,{children:[(0,s.tZ)(a.Z.Content,{children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(a.Z.Footer,{})]})})};function k(){var e,t;let r=(0,h.G)(),d=(0,i.cL)(),{navigate:k,currentPath:f}=(0,p.useRouter)();return((0,l.useEffect)(()=>{var e,t,s,i;let l=null==(e=d.session)?void 0:e.currentTask;if(!l||(null==(t=d.session)?void 0:t.status)==="active"){(null==(i=r.redirectOnActiveSession)?void 0:i.current)&&k(r.redirectUrlComplete);return}null==(s=d.telemetry)||s.record((0,o.Zg)("SessionTask",{task:l.key}))},[d,f,k,r.redirectUrlComplete,r.redirectOnActiveSession]),!(null==(e=d.session)?void 0:e.currentTask)&&(null==(t=r.redirectOnActiveSession)?void 0:t.current))?(0,s.BX)(a.Z.Root,{children:[(0,s.tZ)(a.Z.Content,{sx:()=>({flex:1}),children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(a.Z.Footer,{})]}):(0,s.tZ)(n.Flow.Root,{flow:"tasks",children:(0,s.BX)(p.Switch,{children:[(0,s.tZ)(p.Route,{path:u.fr["choose-organization"],children:(0,s.tZ)(h.md.Provider,{value:{componentName:"TaskChooseOrganization",redirectUrlComplete:r.redirectUrlComplete},children:(0,s.tZ)(Z.TaskChooseOrganization,{})})}),(0,s.tZ)(p.Route,{path:u.fr["reset-password"],children:(0,s.tZ)(h.mf.Provider,{value:{componentName:"TaskResetPassword",redirectUrlComplete:r.redirectUrlComplete},children:(0,s.tZ)(w.TaskResetPassword,{})})}),(0,s.tZ)(p.Route,{path:u.fr["setup-mfa"],children:(0,s.tZ)(h.rr.Provider,{value:{componentName:"TaskSetupMFA",redirectUrlComplete:r.redirectUrlComplete},children:(0,s.tZ)(m.TaskSetupMFA,{})})}),(0,s.tZ)(p.Route,{index:!0,children:(0,s.tZ)(v,{})})]})})}let f=(0,d.withCardStateProvider)(e=>{let{redirectUrlComplete:t}=e,r=(0,l.useRef)(!0);return(0,s.tZ)(h.Hs.Provider,{value:{redirectUrlComplete:t,redirectOnActiveSession:r},children:(0,s.tZ)(k,{})})})},13678:function(e,t,r){r.r(t),r.d(t,{TaskResetPassword:()=>k}),r(65223);var s=r(73312),i=r(61869),o=r(11576),l=r(86988),n=r(64204),a=r(92418),d=r(2672),c=r(70431),u=r(92654),h=r(65695),p=r(54264),Z=r(88870),w=r(86842),m=r(36788),v=r(31753);let k=(0,o.withCoreSessionSwitchGuard)((0,v.U)((0,d.withCardStateProvider)(()=>{var e,t,r,v,k,f,g;let y=(0,i.cL)(),C=(0,d.useCardState)(),{userSettings:{passwordSettings:P}}=(0,o.useEnvironment)(),{t:R,locale:S}=(0,n.useLocalizations)(),{redirectUrlComplete:O}=(0,l.y2)(),{otherSessions:b}=(0,p.j)({user:y.user}),{navigateAfterSignOut:T,navigateAfterMultiSessionSingleSignOutUrl:z}=(0,o.useSignOutContext)(),A=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:F}=(0,l.G)(),K=(0,m.Yp)("newPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,w.GM)(e,{t:R,locale:S,passwordSettings:P})}),L=(0,m.Yp)("confirmPassword","",{type:"password",label:(0,n.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),B=(0,m.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,n.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:_,isPasswordMatch:x}=(0,h.p5)({passwordField:K,confirmPasswordField:L}),I=null!=(g=null==(t=y.user)||null==(e=t.primaryEmailAddress)?void 0:e.emailAddress)?g:null==(r=y.user)?void 0:r.username;return(0,s.tZ)(n.Flow.Root,{flow:"taskResetPassword",children:(0,s.tZ)(n.Flow.Part,{part:"resetPassword",children:(0,s.BX)(a.Z.Root,{children:[(0,s.BX)(a.Z.Content,{children:[(0,s.BX)(u.h.Root,{showLogo:!0,children:[(0,s.tZ)(u.h.Title,{localizationKey:(0,n.localizationKeys)("taskResetPassword.title")}),(0,s.tZ)(u.h.Subtitle,{localizationKey:(0,n.localizationKeys)("taskResetPassword.subtitle")})]}),(0,s.tZ)(a.Z.Alert,{children:C.error}),(0,s.tZ)(n.Col,{elementDescriptor:n.descriptors.main,gap:8,children:(0,s.BX)(c.l.Root,{onSubmit:()=>{C.runAsync(async()=>{if(y.user){K.clearFeedback(),L.clearFeedback();try{await A(y.user,[{newPassword:K.value,signOutOfOtherSessions:B.checked}]),await y.setActive({session:y.session,navigate:async e=>{let{session:t}=e;await (null==F?void 0:F({session:t,redirectUrlComplete:O}))}})}catch(e){return(0,Z.S3)(e,[K,L],C.setError)}}})},onBlur:()=>{K.value&&_(L.value)},gap:8,children:[(0,s.BX)(n.Col,{gap:6,children:[(0,s.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(k=y.user)||null==(v=k.primaryEmailAddress)?void 0:v.emailAddress)||(null==(f=y.user)?void 0:f.username)||"",style:{display:"none"}}),(0,s.tZ)(c.l.ControlRow,{elementId:K.id,children:(0,s.tZ)(c.l.PasswordInput,{...K.props,isRequired:!0,minLength:6})}),(0,s.tZ)(c.l.ControlRow,{elementId:L.id,children:(0,s.tZ)(c.l.PasswordInput,{...L.props,onChange:e=>(e.target.value&&_(e.target.value),L.props.onChange(e))})}),(0,s.tZ)(c.l.ControlRow,{elementId:B.id,children:(0,s.tZ)(c.l.Checkbox,{...B.props})})]}),(0,s.tZ)(n.Col,{gap:3,children:(0,s.tZ)(c.l.SubmitButton,{isLoading:C.isLoading,isDisabled:!x,localizationKey:(0,n.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,s.tZ)(a.Z.Footer,{children:(0,s.BX)(a.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[I&&(0,s.tZ)(a.Z.ActionText,{truncate:!0,localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:I})}),(0,s.tZ)(a.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===b.length?null==y||y.signOut(T):null==y||y.signOut(z,{sessionId:null==(e=y.session)?void 0:e.id})},localizationKey:(0,n.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))}}]);