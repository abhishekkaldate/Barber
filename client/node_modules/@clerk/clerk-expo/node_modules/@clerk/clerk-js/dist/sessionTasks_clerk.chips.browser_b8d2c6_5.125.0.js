"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["8877"],{51618:function(e,t,r){r.r(t),r.d(t,{SessionTasks:()=>g});var s=r(73312),i=r(61869),o=r(67964),n=r(69144),a=r(64204),l=r(92418),d=r(2672),c=r(21455),u=r(76663),h=r(86988),p=r(24676),Z=r(7008),w=r(13678),m=r(95710);let k=()=>{let e=(0,i.cL)(),{navigate:t}=(0,p.useRouter)(),{redirectUrlComplete:r}=(0,h.G)();return(0,n.useEffect)(()=>{let r=setTimeout(()=>{let r=e.session?.currentTask?.key;r&&t(`./${u.fr[r]}`)},500);return()=>clearTimeout(r)},[t,e,r]),(0,s.tZ)(a.Flow.Part,{part:"start",children:(0,s.BX)(l.Z.Root,{children:[(0,s.tZ)(l.Z.Content,{children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(l.Z.Footer,{})]})})};function f(){let e=(0,h.G)(),t=(0,i.cL)(),{navigate:r,currentPath:d}=(0,p.useRouter)();return((0,n.useEffect)(()=>{let s=t.session?.currentTask;if(!s||t.session?.status==="active"){e.redirectOnActiveSession?.current&&r(e.redirectUrlComplete);return}t.telemetry?.record((0,o.Zg)("SessionTask",{task:s.key}))},[t,d,r,e.redirectUrlComplete,e.redirectOnActiveSession]),!t.session?.currentTask&&e.redirectOnActiveSession?.current)?(0,s.BX)(l.Z.Root,{children:[(0,s.tZ)(l.Z.Content,{sx:()=>({flex:1}),children:(0,s.tZ)(c.I,{})}),(0,s.tZ)(l.Z.Footer,{})]}):(0,s.tZ)(a.Flow.Root,{flow:"tasks",children:(0,s.BX)(p.Switch,{children:[(0,s.tZ)(p.Route,{path:u.fr["choose-organization"],children:(0,s.tZ)(h.md.Provider,{value:{componentName:"TaskChooseOrganization",redirectUrlComplete:e.redirectUrlComplete},children:(0,s.tZ)(Z.TaskChooseOrganization,{})})}),(0,s.tZ)(p.Route,{path:u.fr["reset-password"],children:(0,s.tZ)(h.mf.Provider,{value:{componentName:"TaskResetPassword",redirectUrlComplete:e.redirectUrlComplete},children:(0,s.tZ)(w.TaskResetPassword,{})})}),(0,s.tZ)(p.Route,{path:u.fr["setup-mfa"],children:(0,s.tZ)(h.rr.Provider,{value:{componentName:"TaskSetupMFA",redirectUrlComplete:e.redirectUrlComplete},children:(0,s.tZ)(m.TaskSetupMFA,{})})}),(0,s.tZ)(p.Route,{index:!0,children:(0,s.tZ)(k,{})})]})})}let g=(0,d.withCardStateProvider)(({redirectUrlComplete:e})=>{let t=(0,n.useRef)(!0);return(0,s.tZ)(h.Hs.Provider,{value:{redirectUrlComplete:e,redirectOnActiveSession:t},children:(0,s.tZ)(f,{})})})},13678:function(e,t,r){r.r(t),r.d(t,{TaskResetPassword:()=>f});var s=r(73312),i=r(61869),o=r(11576),n=r(86988),a=r(64204),l=r(92418),d=r(2672),c=r(70431),u=r(92654),h=r(65695),p=r(54264),Z=r(88870),w=r(86842),m=r(36788),k=r(31753);let f=(0,o.withCoreSessionSwitchGuard)((0,k.U)((0,d.withCardStateProvider)(()=>{let e=(0,i.cL)(),t=(0,d.useCardState)(),{userSettings:{passwordSettings:r}}=(0,o.useEnvironment)(),{t:k,locale:f}=(0,a.useLocalizations)(),{redirectUrlComplete:g}=(0,n.y2)(),{otherSessions:y}=(0,p.j)({user:e.user}),{navigateAfterSignOut:C,navigateAfterMultiSessionSingleSignOutUrl:P}=(0,o.useSignOutContext)(),R=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:v}=(0,n.G)(),S=(0,m.Yp)("newPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,w.GM)(e,{t:k,locale:f,passwordSettings:r})}),O=(0,m.Yp)("confirmPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),b=(0,m.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,a.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:T,isPasswordMatch:z}=(0,h.p5)({passwordField:S,confirmPasswordField:O}),A=e.user?.primaryEmailAddress?.emailAddress??e.user?.username;return(0,s.tZ)(a.Flow.Root,{flow:"taskResetPassword",children:(0,s.tZ)(a.Flow.Part,{part:"resetPassword",children:(0,s.BX)(l.Z.Root,{children:[(0,s.BX)(l.Z.Content,{children:[(0,s.BX)(u.h.Root,{showLogo:!0,children:[(0,s.tZ)(u.h.Title,{localizationKey:(0,a.localizationKeys)("taskResetPassword.title")}),(0,s.tZ)(u.h.Subtitle,{localizationKey:(0,a.localizationKeys)("taskResetPassword.subtitle")})]}),(0,s.tZ)(l.Z.Alert,{children:t.error}),(0,s.tZ)(a.Col,{elementDescriptor:a.descriptors.main,gap:8,children:(0,s.BX)(c.l.Root,{onSubmit:()=>{t.runAsync(async()=>{if(e.user){S.clearFeedback(),O.clearFeedback();try{await R(e.user,[{newPassword:S.value,signOutOfOtherSessions:b.checked}]),await e.setActive({session:e.session,navigate:async({session:e})=>{await v?.({session:e,redirectUrlComplete:g})}})}catch(e){return(0,Z.S3)(e,[S,O],t.setError)}}})},onBlur:()=>{S.value&&T(O.value)},gap:8,children:[(0,s.BX)(a.Col,{gap:6,children:[(0,s.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:e.user?.primaryEmailAddress?.emailAddress||e.user?.username||"",style:{display:"none"}}),(0,s.tZ)(c.l.ControlRow,{elementId:S.id,children:(0,s.tZ)(c.l.PasswordInput,{...S.props,isRequired:!0,minLength:6})}),(0,s.tZ)(c.l.ControlRow,{elementId:O.id,children:(0,s.tZ)(c.l.PasswordInput,{...O.props,onChange:e=>(e.target.value&&T(e.target.value),O.props.onChange(e))})}),(0,s.tZ)(c.l.ControlRow,{elementId:b.id,children:(0,s.tZ)(c.l.Checkbox,{...b.props})})]}),(0,s.tZ)(a.Col,{gap:3,children:(0,s.tZ)(c.l.SubmitButton,{isLoading:t.isLoading,isDisabled:!z,localizationKey:(0,a.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,s.tZ)(l.Z.Footer,{children:(0,s.BX)(l.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[A&&(0,s.tZ)(l.Z.ActionText,{truncate:!0,localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:A})}),(0,s.tZ)(l.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{0===y.length?e?.signOut(C):e?.signOut(P,{sessionId:e.session?.id})},localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))}}]);