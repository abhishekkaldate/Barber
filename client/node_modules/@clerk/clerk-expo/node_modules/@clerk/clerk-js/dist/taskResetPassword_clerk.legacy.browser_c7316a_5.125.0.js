"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["196"],{13678:function(e,t,s){s.r(t),s.d(t,{TaskResetPassword:()=>g}),s(65223);var n=s(73312),i=s(61869),r=s(11576),l=s(86988),a=s(64204),o=s(92418),d=s(2672),u=s(70431),c=s(92654),p=s(65695),h=s(54264),m=s(88870),w=s(86842),y=s(36788),k=s(31753);let g=(0,r.withCoreSessionSwitchGuard)((0,k.U)((0,d.withCardStateProvider)(()=>{var e,t,s,k,g,v,f;let Z=(0,i.cL)(),b=(0,d.useCardState)(),{userSettings:{passwordSettings:C}}=(0,r.useEnvironment)(),{t:P,locale:R}=(0,a.useLocalizations)(),{redirectUrlComplete:O}=(0,l.y2)(),{otherSessions:S}=(0,h.j)({user:Z.user}),{navigateAfterSignOut:_,navigateAfterMultiSessionSingleSignOutUrl:z}=(0,r.useSignOutContext)(),A=(0,i.WZ)((e,t)=>e.updatePassword(...t)),{navigateOnSetActive:K}=(0,l.G)(),T=(0,y.Yp)("newPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__newPassword"),isRequired:!0,validatePassword:!0,buildErrorMessage:e=>(0,w.GM)(e,{t:P,locale:R,passwordSettings:C})}),I=(0,y.Yp)("confirmPassword","",{type:"password",label:(0,a.localizationKeys)("formFieldLabel__confirmPassword"),isRequired:!0}),L=(0,y.Yp)("signOutOfOtherSessions","",{type:"checkbox",label:(0,a.localizationKeys)("formFieldLabel__signOutOfOtherSessions"),defaultChecked:!0}),{setConfirmPasswordFeedback:x,isPasswordMatch:B}=(0,p.p5)({passwordField:T,confirmPasswordField:I}),F=null!=(f=null==(t=Z.user)||null==(e=t.primaryEmailAddress)?void 0:e.emailAddress)?f:null==(s=Z.user)?void 0:s.username;return(0,n.tZ)(a.Flow.Root,{flow:"taskResetPassword",children:(0,n.tZ)(a.Flow.Part,{part:"resetPassword",children:(0,n.BX)(o.Z.Root,{children:[(0,n.BX)(o.Z.Content,{children:[(0,n.BX)(c.h.Root,{showLogo:!0,children:[(0,n.tZ)(c.h.Title,{localizationKey:(0,a.localizationKeys)("taskResetPassword.title")}),(0,n.tZ)(c.h.Subtitle,{localizationKey:(0,a.localizationKeys)("taskResetPassword.subtitle")})]}),(0,n.tZ)(o.Z.Alert,{children:b.error}),(0,n.tZ)(a.Col,{elementDescriptor:a.descriptors.main,gap:8,children:(0,n.BX)(u.l.Root,{onSubmit:()=>{b.runAsync(async()=>{if(Z.user){T.clearFeedback(),I.clearFeedback();try{await A(Z.user,[{newPassword:T.value,signOutOfOtherSessions:L.checked}]),await Z.setActive({session:Z.session,navigate:async e=>{let{session:t}=e;await (null==K?void 0:K({session:t,redirectUrlComplete:O}))}})}catch(e){return(0,m.S3)(e,[T,I],b.setError)}}})},onBlur:()=>{T.value&&x(I.value)},gap:8,children:[(0,n.BX)(a.Col,{gap:6,children:[(0,n.tZ)("input",{readOnly:!0,"data-testid":"hidden-identifier",id:"identifier-field",name:"identifier",value:(null==(g=Z.user)||null==(k=g.primaryEmailAddress)?void 0:k.emailAddress)||(null==(v=Z.user)?void 0:v.username)||"",style:{display:"none"}}),(0,n.tZ)(u.l.ControlRow,{elementId:T.id,children:(0,n.tZ)(u.l.PasswordInput,{...T.props,isRequired:!0,minLength:6})}),(0,n.tZ)(u.l.ControlRow,{elementId:I.id,children:(0,n.tZ)(u.l.PasswordInput,{...I.props,onChange:e=>(e.target.value&&x(e.target.value),I.props.onChange(e))})}),(0,n.tZ)(u.l.ControlRow,{elementId:L.id,children:(0,n.tZ)(u.l.Checkbox,{...L.props})})]}),(0,n.tZ)(a.Col,{gap:3,children:(0,n.tZ)(u.l.SubmitButton,{isLoading:b.isLoading,isDisabled:!B,localizationKey:(0,a.localizationKeys)("taskResetPassword.formButtonPrimary")})})]})})]}),(0,n.tZ)(o.Z.Footer,{children:(0,n.BX)(o.Z.Action,{elementId:"signOut",gap:2,justify:"center",sx:()=>({width:"100%"}),children:[F&&(0,n.tZ)(o.Z.ActionText,{truncate:!0,localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionText",{identifier:F})}),(0,n.tZ)(o.Z.ActionLink,{sx:()=>({flexShrink:0}),onClick:()=>{var e;0===S.length?null==Z||Z.signOut(_):null==Z||Z.signOut(z,{sessionId:null==(e=Z.session)?void 0:e.id})},localizationKey:(0,a.localizationKeys)("taskResetPassword.signOut.actionLink")})]})})]})})})}),"reset-password"))},31753:function(e,t,s){s.d(t,{R:()=>p,U:()=>l});var n=s(95274),i=s(96231),r=s(86988);let l=(e,t)=>{let s=e.displayName||e.name||"Component";e.displayName=s;let l=s=>{let l=(0,r.G)();return(0,i.me)(e,e=>{var s;return!(null==(s=e.session)?void 0:s.currentTask)||e.session.currentTask.key!==t&&!e.__internal_setActiveInProgress},e=>{var t;let{clerk:s}=e;return s.session?null!=(t=l.redirectUrlComplete)?t:s.buildAfterSignInUrl():s.buildSignInUrl()},n.q.cannotRenderComponentWhenTaskDoesNotExist)(s)};return l.displayName="withTaskGuard(".concat(s,")"),l};var a=s(73312),o=s(43227),d=s(61869),u=s(69144),c=s(24676);let p=(e,t)=>{let s=e.displayName||e.name||"Component";e.displayName=s;let i=s=>{let i=(0,r.G)(),l=(0,d.cL)(),{navigate:p}=(0,c.useRouter)(),h=(0,u.useRef)(null);if(null===h.current){var m;h.current=!(null==(m=l.session)?void 0:m.currentTask)||l.session.currentTask.key!==t&&!l.__internal_setActiveInProgress}return((0,u.useEffect)(()=>{if(h.current){var e;(0,o.kZ)(l.publishableKey)&&console.info(n.q.cannotRenderComponentWhenTaskDoesNotExist),p(l.session?null!=(e=i.redirectUrlComplete)?e:l.buildAfterSignInUrl():l.buildSignInUrl())}},[]),h.current)?null:(0,a.tZ)(e,{...s})};return i.displayName="withTaskGuardOnlyOnMount(".concat(s,")"),i}}}]);