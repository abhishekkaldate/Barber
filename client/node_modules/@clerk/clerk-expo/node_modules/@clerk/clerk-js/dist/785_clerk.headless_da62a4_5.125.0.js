"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["785"],{3656:function(t,i,e){e.d(i,{getDebugLogger:()=>a}),e(4086);class s{logLevel;transport;constructor(t,i){this.transport=t,this.logLevel=i??"debug"}debug(t,i,e){this.log("debug",t,i,e)}error(t,i,e){this.log("error",t,i,e)}info(t,i,e){this.log("info",t,i,e)}warn(t,i,e){this.log("warn",t,i,e)}log(t,i,e,s){if(!this.shouldLogLevel(t))return;let r={timestamp:Date.now(),level:t,message:i,context:e,source:s};this.transport.send(r).catch(t=>{console.error("Failed to send log entry:",t)})}shouldLogLevel(t){let i=["error","warn","info","debug"],e=i.indexOf(this.logLevel);return i.indexOf(t)<=e}}class r{transports;constructor(t){this.transports=t}async send(t){let i=this.transports.map(i=>i.send(t).catch(t=>{console.error("Failed to send to transport:",t)}));await Promise.allSettled(i)}}class n{send(t){return Promise.resolve()}}class o{collector;constructor(t){this.collector=t}async send(t){this.collector&&await Promise.resolve(this.collector.recordLog({context:t.context,level:t.level,message:t.message,organizationId:t.organizationId,sessionId:t.sessionId,source:t.source,timestamp:t.timestamp,userId:t.userId}))}}class l{static instance;initialized=!1;logger=null;initializationPromise=null;constructor(){}static getInstance(){return l.instance||(l.instance=new l),l.instance}async initialize(t={}){return this.initialized?this.logger:(this.initializationPromise||(this.initializationPromise=this.performInitialization(t)),this.initializationPromise)}async performInitialization(t){try{if(t.logLevel&&"string"!=typeof t.logLevel)throw Error("logLevel must be a string");let{logLevel:i,telemetryCollector:e}=t,l=[{transport:new n},...e?[{transport:new o(e)}]:[]].map(t=>t.transport),a=new r(l),c=new s(a,i??"info");return this.logger=c,this.initialized=!0,this.logger}catch(t){return console.error("Failed to initialize debug module:",t),this.initializationPromise=null,null}}getLogger(){return this.logger}isInitialized(){return this.initialized}reset(){this.initialized=!1,this.logger=null,this.initializationPromise=null}}async function a(t={}){return l.getInstance().initialize(t)}}}]);